<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.18.1/build/cssreset/cssreset-min.css">
    <meta charset="UTF-8">
    <title>Summoners War Battle simulator</title>
</head>
<style>

</style>
<script type="module">
    import { Router } from 'https://unpkg.com/@vaadin/router';

    class Storage {
        constructor() {

        }

        setArenaTower(tower, lvl) {
            const towers = this.getArenaTowers();
            if (tower in towers) {
                localStorage.setItem('arena-towers', {
                    ...towers,
                    [tower]: lvl,
                });
            } else {
                throw new Error('');
            }
        }

        getArenaTowers() {
            return localStorage.getItem('arena-towers') || {
                "guardstone": 0,
                "water-sanctuary": 0,
                "fire-sanctuary": 0,
                "wind-sanctuary": 0,
                "light-sanctuary": 0,
                "dark-sanctuary": 0,
                "ancient-sword": 0,
                "crystal-altar": 0,
                "sky-tribe-totem": 0,
                "fallen-ancient-guardian": 0,
            };
        }
    }



    class ArenaTowers extends HTMLElement {

        constructor() {
            super();
        }

        connectedCallback() {
            this.innerHTML = `
                <div>
                    <h2>Arena Towers</h2>
                    <div>
                        <label>Guardstone <input type="number" min="0" max="10" value=""></label>
                    </div>
                </div>
            `;
        }
    }
    customElements.define('x-arena-towers', ArenaTowers);

    class Presets extends HTMLElement {

        constructor() {
            super();
        }

        connectedCallback() {
            this.innerHTML = `
                <div>
                    <h2>Presets</h2>
                    <div>
                        <label>Guardstone <input type="number" min="0" max="10" value=""></label>
                    </div>
                </div>
            `;
        }
    }
    customElements.define('x-arena-towers', ArenaTowers);

    class Home extends HTMLElement {
        connectedCallback() {
            this.innerHTML = `
                <div>
                    <h1>Home Page</h1>
                    <x-arena-towers/>
                </div>
            `;
        }
    }

    // class XBComponent extends HTMLElement {
    //     connectedCallback() {
    //         this.innerHTML = '<h1>Other Page</h1>'
    //     }
    // }

    class NotFoundView extends HTMLElement {
        // We are using `route` property, which is defined by the router
        connectedCallback() {
            this.innerHTML = `
			<h1>Page not found</h1>
			The pathname was: ${this.location.pathname}
		`;
        }
    }

    customElements.define('x-home', Home);
    customElements.define('not-found-view', NotFoundView);
    // customElements.define('x-b-component', XBComponent);

    const router = new Router(document.getElementById('swbs'));
    router.setRoutes([
        { path: '/', component: 'x-home' },
        // {
        //     path: '/battles', children: [
        //         { path: '/', component: 'x-new-battle' },
        //         { path: '/:battle-type', component: 'x-battle-profile' }
        //     ]
        // },
        { path: '(.*)', component: 'not-found-view' }
    ]);
</script>
<body>
<nav>
    <a href="/">Home</a>
    <!--a href="/battles">battles</a-->
</nav>
<div id="swbs"></div>
</body>
</html>
